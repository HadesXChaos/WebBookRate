{% extends "base.html" %} {% load static %} {% block content %}
<div class="settings-wrapper">
  <div class="settings-card">
    <h1 class="settings-title">Đổi mật khẩu</h1>

    <p class="settings-subtitle">
      Vì lý do bảo mật, hãy nhập mật khẩu hiện tại rồi đặt mật khẩu mới.
    </p>

    <form
      id="change-password-form"
      method="post"
      data-redirect-url="{% url 'settings' %}"
    >
      {% csrf_token %}

      <!-- Mật khẩu hiện tại -->
      <div class="form-group">
        <label for="old_password">Mật khẩu hiện tại</label>
        <div class="input-with-toggle">
          <input
            type="password"
            id="old_password"
            name="old_password"
            required
            autocomplete="current-password"
          />
          <button
            type="button"
            class="toggle-password"
            data-target="old_password"
          >
            Hiện
          </button>
        </div>
      </div>

      <!-- Mật khẩu mới -->
      <div class="form-group">
        <label for="new_password1">Mật khẩu mới</label>
        <div class="input-with-toggle">
          <input
            type="password"
            id="new_password1"
            name="new_password1"
            required
            autocomplete="new-password"
          />
          <button
            type="button"
            class="toggle-password"
            data-target="new_password1"
          >
            Hiện
          </button>
        </div>
        <small class="help-text">
          Tối thiểu 8 ký tự, nên có cả chữ hoa, chữ thường, số và ký tự đặc
          biệt.
        </small>
      </div>

      <!-- Nhập lại mật khẩu mới -->
      <div class="form-group">
        <label for="new_password2">Nhập lại mật khẩu mới</label>
        <div class="input-with-toggle">
          <input
            type="password"
            id="new_password2"
            name="new_password2"
            required
            autocomplete="new-password"
          />
          <button
            type="button"
            class="toggle-password"
            data-target="new_password2"
          >
            Hiện
          </button>
        </div>
      </div>

      <!-- Chỗ hiện lỗi từ Django (nếu có) -->
      {% if form.errors %}
      <div class="form-errors">{{ form.errors }}</div>
      {% endif %}

      <div class="form-actions">
        <a href="{% url 'settings' %}" class="btn-secondary">Huỷ</a>
        <button type="submit" class="btn-primary">Lưu thay đổi</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
