{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{% block meta_description %}BookReview.vn - Khám phá, đánh giá và chia sẻ sách hay{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}đánh giá sách, review sách, sách hay, reading, books{% endblock %}">
    <meta property="og:title" content="{% block og_title %}BookReview.vn{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Khám phá, đánh giá và chia sẻ sách hay{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:image" content="{% block og_image %}{% static 'images/og-default.jpg' %}{% endblock %}">
    <meta name="twitter:card" content="summary_large_image">
    
    <title>{% block title %}BookReview.vn - Đánh giá sách{% endblock %}</title>
    
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="icon" type="image/svg+xml" href="{% static 'images/favicon.svg' %}">
    <link rel="alternate icon" type="image/x-icon" href="{% static 'images/favicon.svg' %}">
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Navigation Header -->
    <nav class="navbar" role="navigation" aria-label="Main navigation">
        <div class="container">
            <div class="navbar-content">
                <div class="navbar-brand">
                    <a href="{% url 'home' %}" class="logo" aria-label="BookReview.vn Home">
                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 4C5.44772 4 5 4.44772 5 5V27C5 27.5523 5.44772 28 6 28H26C26.5523 28 27 27.5523 27 27V5C27 4.44772 26.5523 4 26 4H6Z" fill="currentColor"/>
                            <path d="M9 8H19M9 12H23M9 16H20M9 20H18" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span>BookReview.vn</span>
                    </a>
                </div>
                
                <div class="navbar-menu">
                    <ul class="navbar-links">
                        <li><a href="{% url 'home' %}">Trang chủ</a></li>
                        <li><a href="{% url 'explore' %}">Khám phá</a></li>
                        <li><a href="{% url 'books:book_list' %}">Sách</a></li>
                        <li><a href="{% url 'reviews:review_list' %}">Reviews</a></li>
                    </ul>
                </div>
                
                <div class="navbar-search">
                    <form class="search-form" action="{% url 'search' %}" method="get" role="search">
                        <input 
                            type="search" 
                            name="q" 
                            placeholder="Tìm kiếm sách, tác giả..." 
                            aria-label="Tìm kiếm"
                            class="search-input"
                            id="main-search"
                        >
                        <button type="submit" class="search-button" aria-label="Tìm kiếm">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16z" stroke="currentColor" stroke-width="2"/>
                                <path d="m19 19-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </button>
                    </form>
                </div>
                
                <div class="navbar-actions">
                    {% if user.is_authenticated %}
                        <div class="user-menu">
                            <a href="{% url 'notifications' %}" class="icon-button" aria-label="Thông báo">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <path d="M10 2C6.686 2 4 4.686 4 8V13L2 15V16H18V15L16 13V8C16 4.686 13.314 2 10 2Z" stroke="currentColor" stroke-width="1.5"/>
                                    <circle cx="10" cy="2" r="1.5" fill="currentColor"/>
                                </svg>
                                <span class="notification-badge" id="notification-count" style="display: none;">0</span>
                            </a>
                            <div class="user-dropdown">
                                <button class="user-avatar-btn" aria-label="Menu người dùng" aria-expanded="false" id="user-menu-btn">
                                    <img src="{% if user.profile.avatar %}{{ user.profile.avatar.url }}{% else %}{% static 'images/default-avatar.svg' %}{% endif %}" 
                                         alt="{{ user.username }}" class="avatar-sm">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                    </svg>
                                </button>
                                <div class="dropdown-menu" id="user-dropdown-menu">
                                    <a href="{% url 'user_profile' user.username %}">Hồ sơ của tôi</a>
                                    <a href="{% url 'user_shelves' %}">Kệ sách</a>
                                    <a href="{% url 'settings' %}">Cài đặt</a>
                                    <hr>
                                    <a href="{% url 'logout' %}">Đăng xuất</a>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <a href="{% url 'login' %}" class="btn btn-outline">Đăng nhập</a>
                        <a href="{% url 'register' %}" class="btn btn-primary">Đăng ký</a>
                    {% endif %}
                    
                    <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false" id="mobile-menu-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Menu -->
            <div class="mobile-menu" id="mobile-menu">
                <ul class="mobile-menu-links">
                    <li><a href="{% url 'home' %}">Trang chủ</a></li>
                    <li><a href="{% url 'explore' %}">Khám phá</a></li>
                    <li><a href="{% url 'books:book_list' %}">Sách</a></li>
                    <li><a href="{% url 'reviews:review_list' %}">Reviews</a></li>
                    {% if user.is_authenticated %}
                        <li><a href="{% url 'user_profile' user.username %}">Hồ sơ</a></li>
                        <li><a href="{% url 'user_shelves' %}">Kệ sách</a></li>
                        <li><a href="{% url 'settings' %}">Cài đặt</a></li>
                        <li><a href="{% url 'logout' %}">Đăng xuất</a></li>
                    {% else %}
                        <li><a href="{% url 'login' %}">Đăng nhập</a></li>
                        <li><a href="{% url 'register' %}">Đăng ký</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main class="main-content">
        {% if messages %}
            <div class="messages-container">
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}" role="alert">
                        {{ message }}
                        <button class="alert-close" aria-label="Close">&times;</button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        
        {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>BookReview.vn</h3>
                    <p>Khám phá, đánh giá và chia sẻ sách hay cùng cộng đồng yêu sách.</p>
                </div>
                
                <div class="footer-section">
                    <h4>Khám phá</h4>
                    <ul>
                        <li><a href="{% url 'explore' %}">Khám phá sách</a></li>
                        <li><a href="{% url 'books:book_list' %}">Danh sách sách</a></li>
                        <li><a href="{% url 'reviews:review_list' %}">Reviews mới</a></li>
                        <li><a href="{% url 'books:author_list' %}">Tác giả</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Tài khoản</h4>
                    <ul>
                        {% if user.is_authenticated %}
                            <li><a href="{% url 'user_profile' user.username %}">Hồ sơ</a></li>
                            <li><a href="{% url 'user_shelves' %}">Kệ sách</a></li>
                            <li><a href="{% url 'settings' %}">Cài đặt</a></li>
                        {% else %}
                            <li><a href="{% url 'login' %}">Đăng nhập</a></li>
                            <li><a href="{% url 'register' %}">Đăng ký</a></li>
                        {% endif %}
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Thông tin</h4>
                    <ul>
                        <li><a href="/about">Về chúng tôi</a></li>
                        <li><a href="/terms">Điều khoản</a></li>
                        <li><a href="/privacy">Chính sách</a></li>
                        <li><a href="/contact">Liên hệ</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; {% now "Y" %} BookReview.vn. All rights reserved.</p>
                <div class="footer-social">
                    <a href="#" aria-label="Facebook"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path d="M18 10a8 8 0 1 0-9 7.93v-5.61H5.9v-2.32h3.1V8.41c0-3.06 1.82-4.75 4.61-4.75 1.33 0 2.73.24 2.73.24v3H13.7c-1.5 0-1.97.93-1.97 1.89v2.25h3.33l-.53 2.32H11.73v5.61A8 8 0 0 0 18 10z"/></svg></a>
                    <a href="#" aria-label="Twitter"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
                </div>
            </div>
        </div>
    </footer>
    
    <script src="{% static 'js/main.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>

